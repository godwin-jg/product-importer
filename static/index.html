<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acme Product Importer</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>Acme Product Importer</h1>
        </header>

        <!-- Section 1: Data Management -->
        <section class="section">
            <h2>Data Management</h2>
            
            <!-- File Upload -->
            <div class="upload-card">
                <h3>Upload CSV</h3>
                <form id="upload-form">
                    <div class="file-drop-zone" id="file-drop-zone">
                        <input type="file" id="file-input" name="file" accept=".csv" required>
                        <div class="file-drop-content">
                            <svg class="file-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            <div class="file-drop-text">
                                <p class="file-drop-primary">Drop your CSV file here</p>
                                <p class="file-drop-secondary">or <span class="file-drop-link">browse</span> to choose a file</p>
                            </div>
                            <div id="file-name-display" class="file-name-display"></div>
                        </div>
                    </div>
                    <button type="submit" id="upload-btn" class="btn-primary upload-btn" disabled>Upload CSV</button>
                </form>
                
                <!-- Upload Progress -->
                <div class="progress-container" id="progress-container" style="display: none;">
                    <div class="progress-header">
                        <span id="upload-status" class="status-message"></span>
                        <span id="upload-percentage" class="status-percentage"></span>
                    </div>
                    <div id="upload-progress" class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>
            </div>

            <!-- Danger Zone: Bulk Delete -->
            <div class="danger-zone">
                <h3>Danger Zone</h3>
                <p>Once deleted, all product data will be gone forever.</p>
                <button type="button" id="delete-all-btn" class="btn-danger">Delete All Products</button>
            </div>
        </section>

        <!-- Section 2: Product Management -->
        <section class="section">
            <div class="section-header">
                <h2>Product Management</h2>
                <button type="button" id="add-product-btn" class="btn-primary">+ Add New Product</button>
            </div>

            <!-- Filters -->
            <div class="filters">
                <select id="search-type-filter" class="search-type-filter">
                    <option value="sku" selected>Search in Group: SKU</option>
                    <option value="text">Search in Group: Name/Text</option>
                </select>
                <input type="text" id="search-input" class="search-input" placeholder="Search...">
                <select id="status-filter" class="status-filter">
                    <option value="">Filter by Status: All</option>
                    <option value="true">Active</option>
                    <option value="false">Inactive</option>
                </select>
            </div>

            <!-- Product Table -->
            <div class="table-container">
                <table id="products-table">
                    <thead>
                        <tr>
                            <th>SKU</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Active</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 20px;">
                                <div class="loading-spinner"></div>
                                <div style="margin-top: 10px;">Loading products...</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="pagination" id="pagination">
                <!-- Pagination will be added here -->
            </div>
        </section>

        <!-- Section 3: Webhook Management -->
        <section class="section">
            <div class="section-header">
                <h2>Webhook Management</h2>
                <button type="button" id="add-webhook-btn" class="btn-primary">+ Add New Webhook</button>
            </div>

            <!-- Webhook Table -->
            <div class="table-container">
                <table id="webhooks-table">
                    <thead>
                        <tr>
                            <th>Webhook URL</th>
                            <th>Event Type</th>
                            <th>Active</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Webhooks will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- Product Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="product-modal-title">Add New Product</h3>
                <button type="button" class="modal-close" id="product-modal-close">&times;</button>
            </div>
            <form id="product-form">
                <div class="form-group">
                    <label for="product-sku">SKU:</label>
                    <input type="text" id="product-sku" name="sku" required>
                </div>
                <div class="form-group">
                    <label for="product-name">Name:</label>
                    <input type="text" id="product-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="product-description">Description:</label>
                    <textarea id="product-description" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="product-active">
                        <input type="checkbox" id="product-active" name="active" checked>
                        Active
                    </label>
                </div>
                <div class="form-actions">
                    <button type="submit" id="product-submit-btn" class="btn-primary">Save</button>
                    <button type="button" id="product-cancel-btn" class="btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Description View Modal -->
    <div id="description-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Product Description</h3>
                <button type="button" class="modal-close" id="description-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="description-modal-text" style="white-space: pre-wrap; word-wrap: break-word;"></p>
            </div>
            <div class="form-actions">
                <button type="button" id="description-modal-close-btn" class="btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Webhook Modal -->
    <div id="webhook-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="webhook-modal-title">Add New Webhook</h3>
                <button type="button" class="modal-close" id="webhook-modal-close">&times;</button>
            </div>
            <form id="webhook-form">
                <div class="form-group">
                    <label for="webhook-url">URL:</label>
                    <input type="url" id="webhook-url" name="url" required>
                </div>
                <div class="form-group">
                    <label for="webhook-event-type">Event Type:</label>
                    <select id="webhook-event-type" name="event_type" required>
                        <option value="">Select event type</option>
                        <option value="product.created">Product Created</option>
                        <option value="product.updated">Product Updated</option>
                        <option value="product.deleted">Product Deleted</option>
                        <option value="import.complete">Import Complete</option>
                        <option value="import.failed">Import Failed</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="webhook-active">
                        <input type="checkbox" id="webhook-active" name="is_active" checked>
                        Active
                    </label>
                </div>
                <div class="form-actions">
                    <button type="submit" id="webhook-submit-btn" class="btn-primary">Save</button>
                    <button type="button" id="webhook-cancel-btn" class="btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/main.js?v=2"></script>
</body>
</html>
